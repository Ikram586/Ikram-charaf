document.addEventListener('DOMContentLoaded', () => {
    const questionArea = document.getElementById('question');
    const optionButtons = document.querySelectorAll('.option-btn');
    const startButton = document.getElementById('start-btn');
    const scoreDisplay = document.getElementById('score');
    let score = 0;

    // كائن يحتوي على الشخصيات التاريخية وتعريفاتها
    const figures = {
        "غاندي": "زعيم هندي دعا إلى المقاومة السلمية ضد الحكم البريطاني.",
        "مارتن لوثر كينغ": "قائد حركة الحقوق المدنية الأمريكية، دعا إلى المساواة والعدالة.",
        "ونستون تشرشل": "رئيس وزراء بريطانيا خلال الحرب العالمية الثانية، معروف بخطاباته المؤثرة.",
        "جورج واشنطن": "أول رئيس للولايات المتحدة الأمريكية وقائد القوات الأمريكية خلال حرب الاستقلال.",
        "نابليون بونابرت": "إمبراطور فرنسا الذي حاول توسيع إمبراطوريته عبر أوروبا.",
        "أدولف هتلر": "زعيم ألمانيا النازية ومؤسس النظام النازي، قاد ألمانيا خلال الحرب العالمية الثانية.",
        "ستالين جوزيف": "رئيس الاتحاد السوفيتي من 1924-1953، تميزت فترة حكمه بالفردية والشدة. في نظر الغرب واجه المخططات الأمريكية بمخططات مضادة منها الكومنفورم وحلف وارسو.جدانوف",
        "أندري الكسندروفيتش (1896-1948)": "سياسي سوفياتي، صاحب الموجة الكتلتين الشرقية والغربية، ساهم في الشدة الإيديولوجية وصاحب المبدأ المعروف باسمه",
        "مارشال جورج (1880-1959)": "جنرال ووزير أمريكي في عهد روزفلت ما بين 1947 و1949، وضع مشروع دعم أوروبا المعروف باسمه، نال جائزة نوبل للسلام بعد نهاية الحرب الكورية 1953",
        "خروتشوف نيكيتا":" صاحب مبدأ التعايش السلمي، وأول زعيم سوفيتي يزور الو.م.أ. حدثت في عهده عدة أزمات أخطرها أزمة الصواريخ في كوبا سنة 1962.",
        "كينيدي، فيتزجيرالد":"- انتخب رئيس للو.م.أ سنة 1961.- وهو صاحب مشروع أبولو الفضائي. في عهده وقعت أزمة كوبا سنة 1962 على إثر نصب الإتحاد السوفيتي صواريخ في كوبا.",
        "رونالد ريغن":"رئيس الو.م.أ بين 1981 - 1989.- وصاحب إستراتيجية الدفاع الحربي التي أعلن عنها سنة 1983 لتشمل سباق التسلح في الفضاء إلى جانب السباق الأرضي بين القوتين العظميين. انتهت في عهده الحرب الباردة.",
        "بريجنيف ليونيد إليتش":"- رئيس الاتحاد السوفيتي خلفًا لخروتشوف بين 1971 - 1982.- في عهده سُجلت أكبر فترة ركود اقتصادي واجتماعي في الاتحاد السوفيتي. كان وراء التدخل العسكري في أفغانستان سنة 1979. قمع حركات التحرر ووجهت له عدة انتقادات.",
        "زيغود يوسف (1921 - 1956)":" مناضل بحزب الشعب وعضو المنظمة الخاصة واللجنة الثورية للوحدة والعمل. من مفجري الثورة، نظم هجوم 20 أوت 1955. ثم عين عضواً بالمجلس الوطني للثورة الجزائرية، استشهد يوم 25 سبتمبر 1956.",
        "محمد بوضياف (1919 - 1992)":"انضم إلى صفوف حزب الشعب وعضو في المنظمة الخاصة. اعتقل في 22 أكتوبر 1956 بعد اختطاف الطائرة التي كانت تقله. ثم نُفي، وعاد ليغتال في 1992.",
        "كريم بلقاسم (1922 - 1970)":"مناضل بحزب الشعب منذ 1947 وعضو جيش جبهة 6. كان من مفجري الثورة وقاد العمليات في منطقة القبائل.",
        "رابح بيطاط (1925 - 2000)":" مناضل في صفوف حركة الانتصار للحريات الديمقراطية وعضو في اللجنة الثورية للوحدة والعمل. وهو عضو في مجموعة 22. اعتقل سنة 1955 وقاد إضراب النار، ثم عين رئيس المجلس الشعبي الوطني إلى غاية 1990.",
        "بن يوسف بن خدة (1923 - 2003)":" رئيس الحكومة الجزائرية المؤقتة من 1962 - 1961.",
        "مصطفى بن بولعيد (1917 - 1956)":" مناضل في حزب الشعب وعضو في اللجنة المركزية، استشهد في 22 مارس 1956.",
        "العربي بن مهيدي (1923 - 1957)":"قائد بارز في الثورة الجزائرية، استشهد في 3 مارس 1957.",
        "ديدوش مراد (1927 - 1956)":"مناضل في حزب الشعب وعضو في اللجنة المركزية، استشهد في 18 جانفي 1956.",
        "مصالي الحاج (1898 - 1974)":" زعيم التيار الاستقلالي وأول من طالب به عبر إنشاء حزب نجم شمال إفريقيا. نفي إلى فرنسا، وحكم عليه بالإعدام.",
        "فرحات عباس (1899 - 1985)":"أول رئيس للحكومة المؤقتة 1958. أحد قادة التيار الإصلاحي. شارك في مؤتمر الصومام 1956. أسس الاتحاد الديمقراطي للبيان الجزائري.",
        "أحمد بن بلة (1918 - 2013)":"أول رئيس للجزائر المستقلة 1962 - 1965. مناضل في صفوف حركة انتصار الحريات الديمقراطية وعضو في اللجنة الثورية للوحدة والعمل.",
        "حسين آيت أحمد (1926)":" انضم إلى حزب الشعب وبعد إنشاء المنظمة الخاصة، كان من أبرز عناصرها. اغتيل في حادثة اغتيال الطائرة.",
        "محمد خيضر (1912 - 1967)":" انضم إلى حزب الشعب الجزائري. اغتيل في حادثة اغتيال الطائرة.",
        "شارل ديغول (1890 - 1970)":" رئيس فرنسا. كان له دور في إنهاء الاستعمار الفرنسي للجزائر.",
        "جاك سوستال (1912)":" سياسي فرنسي وصاحب مشروع إصلاحي في الجزائر.",
        "فيدل كاسترو (1926)":" ثائر وسياسي كوبي. قاد الثورة الكوبية وأصبح رئيساً لكوبا.",
        "باتريس لومومبا (1925 - 1961)":"سياسي كونغولي، ناضل من أجل استقلال الكونغو عن الاستعمار البلجيكي.",
        "ياسر عرفات (1929 - 2004)":" زعيم حركة النضال الفلسطيني، رئيس منظمة التحرير الفلسطينية",
        
        
        
        
        
        
        
        
        
        
    };

    function startGame() {
        score = 0;
        scoreDisplay.textContent = score;
        startButton.style.display = 'none';
        loadNextQuestion();
    }

    function loadNextQuestion() {
        const figureKeys = Object.keys(figures);
        const correctFigure = figureKeys[Math.floor(Math.random() * figureKeys.length)];
        const correctDescription = figures[correctFigure];
        
        questionArea.textContent = `من هو: ${correctDescription}?`;

        // إنشاء خيارات عشوائية تحتوي على الشخصية الصحيحة وثلاثة شخصيات أخرى
        const options = generateOptions(correctFigure, figureKeys);
        optionButtons.forEach((button, index) => {
            button.textContent = options[index];
            button.onclick = () => checkAnswer(button, correctFigure);
            button.classList.remove('correct', 'wrong');
        });
    }

    function generateOptions(correctFigure, figureKeys) {
        const options = [correctFigure];
        while (options.length < 4) {
            const randomFigure = figureKeys[Math.floor(Math.random() * figureKeys.length)];
            if (!options.includes(randomFigure)) {
                options.push(randomFigure);
            }
        }
        return shuffleArray(options);
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function checkAnswer(button, correctFigure) {
        if (button.textContent === correctFigure) {
            button.classList.add('correct');
            score++;
            scoreDisplay.textContent = score;
        } else {
            button.classList.add('wrong');
        }
        // بعد الإجابة، حمّل السؤال التالي بعد فترة قصيرة
        setTimeout(loadNextQuestion, 1000);
    }

    startButton.addEventListener('click', startGame);
});