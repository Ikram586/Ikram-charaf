document.addEventListener('DOMContentLoaded', () => {
    const questionArea = document.getElementById('question');
    const optionButtons = document.querySelectorAll('.option-btn');
    const startButton = document.getElementById('start-btn');
    const scoreDisplay = document.getElementById('score');
    let score = 0;

    // كائن يحتوي على التواريخ والأحداث
    const events = {
        "1962/04/22": "حدث الانقلاب العسكري",
        "1965/06/19": "ميلاد الرئيس الأسبق",
        "1949/01/25": "توقيع اتفاقية هامة",
        "1958/09/18": "تأسيس حزب سياسي",
        "1958/09/18":"تأسيس حزب سياسي",
        "1917/11/02":"صدور وعد بلفور",
        "1920/01/10":"إنشاء عصبة الأمم",
        "1931/12/11":"إنشاء منظمة الكومنولث",
        "1970/03/20":"تأسيس المنظمة الفرانكفونية ",
        "1971/02/24":"تأميم المحروقات ",
        "1972/05/26":"توقيع اتفاقية سالت الاولى ",
        "1973/09/05-09":"انعقاد مؤتمر الرابع",
        "1973/10/06":" الحرب العربية الاسرائيلية الثالثة",
        "1973/10/21":"إصدار القرار الأممي رقم 338", 
        "1978/09/17":"توقيع معاهدة كامب ديفيد",
        "1978/12/27":"وفاة الرئيس هواري بومدين",
        "1979/06/18":"توقيع اتفاقية سالت الثانية بفيينا ",
        "1987/12/08":"اندلاع الانتفاضة الاولى",
        "1988/10/05":"مظاهرات الشعب الجزائري",

        "1988/11/15":"الإعلان عن قيام دولة فلسطين في الجزائر",
        "1989/02/23":"دستور الجزائر الجديد و إقرار التعددية الحزبية ",
        "1989/11/09":"تحطيم جدار برلين ",
        "1989/12/03-04":"مؤتمر مالطا و الإعلان عن زوال القطبية الثنائية",
        "1960/12/11":"مظاهرات الشعب الجزائري بالمدن الكبرى ",
        "1961/05/20":"مفاوضات ايفيان الأولى ",
        "1961/08/13":"بناء جدار برلين",
        "1961/09/01-06":"تأسيس حركة عدم الانحياز ببلاد بيوغسلافيا ",
        "1961/10/17":"مظاهرات الجزائريين في المهجر",
        "1962/03/18":"توقيع اتفاقيات ايفيان الثانية",
        "1962/03/19":"وقف إطلاق النار",
        "1962/07/01":"استفتاء تقرير المصير",
        "1962/07/05":"الاستقلال الرسمي للجزائر",
        "1962/08/16":"انضمام الجزائر لجامعة الدول العربية ",
        "1962/10/08":"انضمام الجزائر الى هيئة الامم المتحدة",
        "1962/10/28":"قرار سحب السوفيات للصواريخ من كوبا ونهاية الأزمة الكوبية",
        "1963/06/20":"إنشاء الخط الهاتفي الأحمر",
        "1965/01/01":"قيام الثورة الفلسطينية بقيادة حركة تحرير فلسطين",
        "1965/06/19":"التصحيح الثوري وعزل بن بلة",
        "1966":"تأسيس منظمة الكوميكون",
        "1967/06/05":"الحرب العربية الاسرائيلية الثانية ",
        "1945/02/04-11":"مؤتمر يالطا بين الولايات المتحدة الامريكية ،الاتحاد السوفياتي،وبريطانيا ",
        "1945/05/08":"مظاهرات ومجازر 08 ماي",
        "1945/08/06-09":"تحطيم مدينتي هيروشيما و ناكازاكي باليابان",
        "1945/10/24":"تأسيس هيئة الأمم المتحدة ",
        "1946/03/16":"إعادة بناء الحركة الوطنية ",
        "1947/02/14":"تشكيل المنظمة الخاصة",
        "1947/03/12":"مبدأ هاري ترومان",
        "1947/06/05":"الإعلان عن مشروع جورج مارشال",
        "1947/08/15":"استقلال الهند ",
        "1947/09/20":"القانون الخاص (دستور الجزائر)",
        "1947/09/22":"الإعلان عن مبدأ جدانوف",
        "1947/10/22":"إنشاء مكتب الكومنفورم",
        "1947/11/29":"مشروع التقسيم الأممي لفلسطين ",
        "1948/05/14":"إنهاء الانتداب البريطاني على فلسطين",
        "1948/05/15":"الإعلان عن قيام دولة الكيان الاسرائيلي ",
        "1948/07/16":"اغتيال الوسيط الأممي الأول",
        "1949/01/25":"تأسيس منظمة الكوميكون ",
        "1949/04/04":"تأسيس حلف شمال الأطلسي(الناتو )",
        "1949/10/01":"نجاح الثورة الشيوعية الصينية",
        "1951/09/01":" تأسيس حلف الأنزوس",
        "1952/07/23":"الثورة المصرية ",
        "1953/03/05":"وفاة الزعيم السوفياتي ستالين",
        "1954/03/23":"إنشاء اللجنة الثورية للوحدة والعمل",
        "1954/07/22-23":"اجتماع المجموعة التاريخية ",
        "1955/04/20":"مؤتمر باندونغ",
        "1954/09/08":"تأسيس حلف جنوب شرق آسيا(السياتو)",
        "1954/10/10":"اجتماع لجنة السبعة الاول",
        "1954/10/23":"اجتماع لجنة السبعة الثاني (اجتماع الحسم)",
        "1955/02/16":"تعيين جاك سوستال حاكما عاما للجزائر",
        "1955/02/24":"تأسيس حلف بغداد",
        "1955/04/01":"إعلان حالة الطوارئ",
        "1955/04/18-24":"مؤتمر باندونغ",
        "1955/05/05":"اعتراف السوفيات بألمانيا الغربية الاتحادية ",
        "1955/05/09":"تأسيس حلف وارسو",
        "1955/08/20":"هجومات الشمال القسنطيني",
        "1956/02/14":"تبني خروتشوف سياسة التعايش السلمي ",
        "1956/02/24":"تأسيس الإتحاد العام للعمال الجزائريين ",
        "1956/04/17":"حل مكتب الكومنفورم",
        "1956/04/22":"حل الاتحاد الديمقراطي للبيان الجزائري و التحاق فرحاة عباس بالثورة",
        "1956/05/19":"إضراب الطلبة الجزائيين والتحاقهم بالثورة ",
        "1956/07/26":"تأميم قناة السويس ",
        "1956/08/20":"انعقاد مؤتمر الصومام",
        "1956/10/22":"اختطاف طائرة قادة الوفد الخارجي للثورة بالمغرب ",
        "1956/10/29":"العدوان الثلاثي على مصر ",
        "1956/11/05":"تهديد السوفيات باستعمال السلاح النووي ضد دول العدوان الثلاثي ",
        "1957/01/05":"الإعلان عن مشروع إيزنهاور",
        "1958/02/08":"قصف ساقية سيدي يوسف(تونس)",
        "1958/05/13":"تمرد جنرالات فرنسا في الجزائر ",
        "1958/06/01":"انتخاب ديغول رئيسا لفرنسا",
        "1958/09/19":"تأسيس الحكومة الجزائرية المؤقتة ",
        "1958/10/03":"الإعلان عن مشروع قسنطينة ",
        "1958/10/23":"الإعلان عن مشروع سلم الشجعان",
        "1958/10/03":"الإعلان عن مشروع قسنطينة ",
        "1959/01/08":"الإطاحة بنظام جون باتيستا ونجاح الثورة الكوبية",
        "1959/09/15-18":"زيارة خروتشوف إلى واشنطن ",
       
    };

    function startGame() {
        score = 0;
        scoreDisplay.textContent = score;
        startButton.style.display = 'none';
        loadNextQuestion();
    }

    function loadNextQuestion() {
        const eventKeys = Object.keys(events);
        const correctDate = eventKeys[Math.floor(Math.random() * eventKeys.length)];
        const correctEvent = events[correctDate];
        
        questionArea.textContent = `متى حدث: ${correctEvent}?`;

        // إنشاء خيارات عشوائية تحتوي على التاريخ الصحيح وثلاثة تواريخ أخرى
        const options = generateOptions(correctDate, eventKeys);
        optionButtons.forEach((button, index) => {
            button.textContent = options[index];
            button.onclick = () => checkAnswer(button, correctDate);
            button.classList.remove('correct', 'wrong');
        });
    }

    function generateOptions(correctDate, eventKeys) {
        const options = [correctDate];
        while (options.length < 4) {
            const randomDate = eventKeys[Math.floor(Math.random() * eventKeys.length)];
            if (!options.includes(randomDate)) {
                options.push(randomDate);
            }
        }
        return shuffleArray(options);
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function checkAnswer(button, correctDate) {
        if (button.textContent === correctDate) {
            button.classList.add('correct');
            score++;
            scoreDisplay.textContent = score;
        } else {
            button.classList.add('wrong');
        }
        // بعد الإجابة، حمّل السؤال التالي بعد فترة قصيرة
        setTimeout(loadNextQuestion, 1000);
    }

    startButton.addEventListener('click', startGame);
});